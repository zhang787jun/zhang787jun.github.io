<!DOCTYPE HTML>
<html>

<head>
    <link rel="Stylesheet" type="text/css" href="/Wiki/static/css/style.css">
    <link rel="Stylesheet" type="text/css" href="/Wiki/static/css/tango.css">
    <link rel="shortcut icon" href="/Wiki/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/Wiki/favicon.ico" type="image/x-icon">
    <title>01_FFmpeg--基础 - Jun's personal knowledge wiki</title>
    <meta name="keywords" content="Technology, MachineLearning, DataMining, Wiki" />
    <meta name="description" content="A wiki website" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
            tex2jax: {
                inlineMath: [ ['$','$'], ["\\(","\\)"] ],
                displayMath: [ ['$$','$$'], ["\\[","\\]"] ]
            }
        });
    </script>
    <script type="text/javascript" async
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML">
        </script>
</head>

<body>

    <div id="container">
        
<div id="header">
  <div id="post-nav"><a href="/Wiki/">Home</a>&nbsp;»&nbsp;<a href="/Wiki/#Computer_Vision">Computer_Vision</a>&nbsp;»&nbsp;<a href="/Wiki/#-Library_Platform">Library_Platform</a>&nbsp;»&nbsp;<a href="/Wiki/#-FFmpeg">FFmpeg</a>&nbsp;»&nbsp;01_FFmpeg--基础</div>
</div>
<div class="clearfix"></div>
<div id="title">01_FFmpeg--基础</div>
<div id="content">
  <div class="toc"><span class="toctitle">Table of Contents</span><ul>
<li><a href="#1-ffmpeg">1. 什么是FFmpeg</a><ul>
<li><a href="#11">1.1. 安装</a></li>
<li><a href="#12-tips">1.2. Tips</a></li>
<li><a href="#13">1.3. 验证</a><ul>
<li><a href="#131">1.3.1. 支持的容器</a></li>
<li><a href="#131_1">1.3.1. 支持的编解码格式</a></li>
<li><a href="#132">1.3.2. 支持的硬件加速方法</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#2">2. 组成</a><ul>
<li><a href="#21-format">2.1. format</a></li>
<li><a href="#22-codec">2.2. codec</a></li>
<li><a href="#23-util">2.3. util</a></li>
</ul>
</li>
<li><a href="#3-ffmpeg">3. FFmpeg 的使用格式</a></li>
<li><a href="#4">4. 参考资料</a></li>
</ul>
</div>
<h1 id="1-ffmpeg">1. 什么是FFmpeg</h1>
<blockquote>
<p>FFmpeg is a free and open-source <strong>software</strong> project consisting of a large suite of libraries and programs for handling video, audio, and other multimedia files and streams. </p>
</blockquote>
<p>FFmpeg 是视频处理最常用的开源软件。<br />
它功能强大，用途广泛，大量用于视频网站和商业软件（比如 Youtube 和 iTunes），也是许多音频和视频格式的标准编码/解码实现。</p>
<h2 id="11">1.1. 安装</h2>
<div class="hlcode"><pre><span class="cp"># FFmpeg dev package</span>
<span class="n">sudo</span> <span class="n">apt</span> <span class="n">install</span> <span class="n">libavcodec</span><span class="o">-</span><span class="n">dev</span>
</pre></div>


<h2 id="12-tips">1.2. Tips</h2>
<p>上面命令会输出很多冗余信息，加上<code>-hide_banner</code>参数，可以只显示元信息。</p>
<div class="hlcode"><pre><span class="n">ffmpeg</span> <span class="o">-</span><span class="n">i</span> <span class="n">input</span><span class="p">.</span><span class="n">mp4</span> <span class="o">-</span><span class="n">hide_banner</span>
</pre></div>


<h2 id="13">1.3. 验证</h2>
<div class="hlcode"><pre><span class="cp"># 验证安装</span>
<span class="n">ffmpeg</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="n">ffmpeg</span> <span class="n">version</span> <span class="mf">3.4.8</span><span class="o">-</span><span class="mi">0u</span><span class="n">buntu0</span><span class="mf">.2</span> <span class="n">Copyright</span> <span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="mi">2000</span><span class="o">-</span><span class="mi">2020</span> <span class="n">the</span> <span class="n">FFmpeg</span> <span class="n">developers</span>
  <span class="n">built</span> <span class="n">with</span> <span class="n">gcc</span> <span class="mi">7</span> <span class="p">(</span><span class="n">Ubuntu</span> <span class="mf">7.5.0</span><span class="o">-</span><span class="mi">3u</span><span class="n">buntu1</span><span class="o">~</span><span class="mf">18.04</span><span class="p">)</span>
</pre></div>


<h3 id="131">1.3.1. 支持的容器</h3>
<div class="hlcode"><pre><span class="cp"># 查看 FFmpeg 支持的容器。</span>
<span class="n">ffmpeg</span> <span class="o">-</span><span class="n">formats</span>
<span class="n">ffmpeg</span> <span class="o">-</span><span class="n">formats</span><span class="o">|</span> <span class="n">grep</span> <span class="s">&quot;mp4&quot;</span> <span class="o">-</span><span class="n">hide_banner</span>
</pre></div>


<h3 id="131_1">1.3.1. 支持的编解码格式</h3>
<div class="hlcode"><pre><span class="cp"># 查看 FFmpeg 支持的编码格式。</span>
<span class="n">ffmpeg</span> <span class="o">-</span><span class="n">codecs</span> 
<span class="n">ffmpeg</span> <span class="o">-</span><span class="n">codecs</span> <span class="o">|</span> <span class="n">grep</span> <span class="s">&quot;h264&quot;</span> <span class="o">-</span><span class="n">hide_banner</span>

<span class="cp"># 查看 FFmpeg 支持的编码格式。</span>
<span class="n">ffmpeg</span> <span class="o">-</span><span class="n">encoders</span><span class="o">|</span> <span class="n">grep</span> <span class="s">&quot;h264&quot;</span> <span class="o">-</span><span class="n">hide_banner</span>
</pre></div>


<h3 id="132">1.3.2. 支持的硬件加速方法</h3>
<div class="hlcode"><pre><span class="n">ffmpeg</span> <span class="o">-</span><span class="n">hwaccels</span> <span class="o">-</span><span class="n">hide_banner</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="n">Hardware</span> <span class="n">acceleration</span> <span class="n">methods</span><span class="o">:</span>
<span class="n">vdpau</span>
<span class="n">vaapi</span>
<span class="n">cuvid</span>
</pre></div>


<blockquote>
<p>Note</p>
<blockquote>
<ol>
<li><strong>VDPAU</strong> (Video Decode and Presentation API for Unix)是一个最初由NVIDIA开发的针对其GeForce 8系列以及更高系列的GPU[1][2] ，在UNIX和类UNIX系统（包括 Linux、FreeBSD和Solaris）下基于X窗口系统下的开源库(libvdpau)和API</li>
<li><strong>VAAPI</strong> Video Acceleration API (VA-API) is an open source API that allows applications such as VLC media player or GStreamer to use hardware video acceleration capabilities, usually provided by the graphics processing unit (GPU). It is implemented by the free and open-source library libva, combined with a hardware-specific driver, usually provided together with the GPU driver 主要针对Intel的集成显卡</li>
</ol>
</blockquote>
</blockquote>
<p><strong>参考资料</strong><br />
<a href="https://zhuanlan.zhihu.com/p/40006235">知乎: FFmpeg 硬件加速方案概览-上</a><br />
<a href="https://zhuanlan.zhihu.com/p/40020428">知乎: FFmpeg 硬件加速方案概览-下（主要）</a></p>
<h1 id="2">2. 组成</h1>
<p>FFmpeg主要由 <code>format</code>,<code>codec</code>,<code>util</code> 三大核心模块的功能。</p>
<h2 id="21-format">2.1. format</h2>
<h2 id="22-codec">2.2. codec</h2>
<h2 id="23-util">2.3. util</h2>
<h1 id="3-ffmpeg">3. FFmpeg 的使用格式</h1>
<p>FFmpeg 的命令行参数非常多，可以分成五个部分。</p>
<div class="hlcode"><pre><span class="n">ffmpeg</span> <span class="p">{</span><span class="mi">1</span><span class="p">}</span> <span class="p">{</span><span class="mi">2</span><span class="p">}</span> <span class="o">-</span><span class="n">i</span> <span class="p">{</span><span class="mi">3</span><span class="p">}</span> <span class="p">{</span><span class="mi">4</span><span class="p">}</span> <span class="p">{</span><span class="mi">5</span><span class="p">}</span>

<span class="mf">1.</span> <span class="err">全局参数</span>
<span class="mf">2.</span> <span class="err">输入文件参数</span>
<span class="mf">3.</span> <span class="err">输入文件</span>
<span class="mf">4.</span> <span class="err">输出文件参数</span>
<span class="mf">5.</span> <span class="err">输出文件</span>
</pre></div>


<div class="hlcode"><pre><span class="n">ffmpeg</span> \
<span class="o">-</span><span class="n">y</span> <span class="err">\</span> <span class="err">#</span> <span class="err">全局参数</span>
<span class="o">-</span><span class="n">c</span><span class="o">:</span><span class="n">a</span> <span class="n">libfdk_aac</span> <span class="o">-</span><span class="n">c</span><span class="o">:</span><span class="n">v</span> <span class="n">libx264</span> <span class="err">\</span> <span class="err">#</span> <span class="err">输入文件参数</span>
<span class="o">-</span><span class="n">i</span> <span class="n">input</span><span class="p">.</span><span class="n">mp4</span> <span class="err">\</span> <span class="err">#</span> <span class="err">输入文件</span>
<span class="o">-</span><span class="n">c</span><span class="o">:</span><span class="n">v</span> <span class="n">libvpx</span><span class="o">-</span><span class="n">vp9</span> <span class="o">-</span><span class="n">c</span><span class="o">:</span><span class="n">a</span> <span class="n">libvorbis</span> <span class="err">\</span> <span class="err">#</span> <span class="err">输出文件参数</span>
<span class="n">output</span><span class="p">.</span><span class="n">webm</span> <span class="err">#</span> <span class="err">输出文件</span>
</pre></div>


<p>如果不指明编码格式，FFmpeg 会自己判断输入文件的编码。因此，上面的命令可以简单写成下面的样子。</p>
<div class="hlcode"><pre><span class="n">ffmpeg</span> <span class="o">-</span><span class="n">i</span> <span class="n">input</span><span class="p">.</span><span class="n">avi</span> <span class="n">output</span><span class="p">.</span><span class="n">mp4</span>
</pre></div>


<h1 id="4">4. 参考资料</h1>
<p>https://zhuanlan.zhihu.com/p/143195044</p>
<p><a href="http://www.ruanyifeng.com/blog/2020/01/ffmpeg.html">阮一峰的网络日志: FFmpeg 视频处理入门教程<br />
</a></p>
</div>
<div id="renote">
  <HR style=" FILTER: alpha (opacity = 100, finishopacity =0 , style= 3 )" width="80%" color=#987 cb 9 SIZE=3>
  <p>如果你觉得这篇文章对你有帮助，不妨请我喝杯咖啡，鼓励我创造更多!</p>
  <img src="/Wiki/static/images/pay.jpg" width="25%">
</div>

    </div>
    <div id="footer">
        <span>
            Copyright © 2021 zhang787jun.
            Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.
        </span>
    </div>

    
</body>
<script>
    function changeImgurl(site_root_url) {
        var images = document.images;
        var site_root = site_root_url;
        for (i = 0, len = images.length; i < len; i++) {
            image = images[i];
            image_src = image.src;
            if (image_src.search("attach") >= 0) {
                re_image_src = image_src.slice(image_src.search("attach"));
                abs_image_src = (site_root.endsWith("/")) ? site_root + re_image_src : site_root + "/" +
                    re_image_src;
                image.src = abs_image_src;
            }
        }
    }
    var site_root_url = "/Wiki";
    changeImgurl(site_root_url);
    let isMathjaxConfig = false; // 防止重复调用Config，造成性能损耗
    const initMathjaxConfig = () => {
        if (!window.MathJax) {
            return;
        }
        window.MathJax.Hub.Config({
            showProcessingMessages: false, //关闭js加载过程信息
            messageStyle: "none", //不显示信息
            jax: ["input/TeX", "output/HTML-CSS"],
            tex2jax: {
                inlineMath: [["$", "$"], ["\\(", "\\)"]], //行内公式选择符
                displayMath: [["$$", "$$"], ["\\[", "\\]"]], //段内公式选择符
                skipTags: ["script", "noscript", "style", "textarea", "pre", "code", "a"] //避开某些标签
            },
            "HTML-CSS": {
                availableFonts: ["STIX", "TeX"], //可选字体
                showMathMenu: false //关闭右击菜单显示
            }
        });
        isMathjaxConfig = true; //
    };
    if (isMathjaxConfig === false) {
        // 如果：没有配置MathJax
        initMathjaxConfig();
    };
</script>

</html>