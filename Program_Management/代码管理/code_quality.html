<!DOCTYPE HTML>
<html>

<head>
    <link rel="Stylesheet" type="text/css" href="/Wiki/static/css/style.css">
    <link rel="Stylesheet" type="text/css" href="/Wiki/static/css/tango.css">
    <link rel="shortcut icon" href="/Wiki/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/Wiki/favicon.ico" type="image/x-icon">
    <title>代码质量及工程化 - Jun's personal knowledge wiki</title>
    <meta name="keywords" content="Technology, MachineLearning, DataMining, Wiki" />
    <meta name="description" content="A wiki website" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
            tex2jax: {
                inlineMath: [ ['$','$'], ["\\(","\\)"] ],
                displayMath: [ ['$$','$$'], ["\\[","\\]"] ]
            }
        });
    </script>
    <script type="text/javascript" async
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML">
        </script>
</head>

<body>

    <div id="container">
        
<div id="header">
  <div id="post-nav"><a href="/Wiki/">Home</a>&nbsp;»&nbsp;<a href="/Wiki/#Program_Management">Program_Management</a>&nbsp;»&nbsp;<a href="/Wiki/#-代码管理">代码管理</a>&nbsp;»&nbsp;代码质量及工程化</div>
</div>
<div class="clearfix"></div>
<div id="title">代码质量及工程化</div>
<div id="content">
  <div class="toc"><span class="toctitle">Table of Contents</span><ul>
<li><a href="#1">1. 高质量的代码</a><ul>
<li><a href="#11">1.1. 原则与境界</a></li>
<li><a href="#12">1.2. 代码规范性</a><ul>
<li><a href="#121">1.2.1. 变量/函数命名格式规范</a></li>
<li><a href="#122">1.2.2. 变量/函数命名语义明确</a><ul>
<li><a href="#1221">1.2.2.1. 动词到位</a><ul>
<li><a href="#12211-tips">1.2.2.1.1. tips</a></li>
</ul>
</li>
<li><a href="#1222">1.2.2.2. 名词合理</a></li>
<li><a href="#1223">1.2.2.3. 标记准确</a></li>
<li><a href="#1224-foo-bar">1.2.2.4. 其他--为什么foo bar？</a></li>
</ul>
</li>
<li><a href="#123">1.2.3. 良好的可读性</a><ul>
<li><a href="#1231">1.2.3.1. 注释</a></li>
<li><a href="#1232">1.2.3.2. 一次只做一件事</a></li>
<li><a href="#1233">1.2.3.3. 用自然语言表述代码</a></li>
<li><a href="#1234">1.2.3.4. 减少代码量</a></li>
</ul>
</li>
<li><a href="#124">1.2.4. 文件名规范</a></li>
</ul>
</li>
<li><a href="#13">1.3. 代码完整性</a><ul>
<li><a href="#131">1.3.1. 核心功能完整</a></li>
<li><a href="#132">1.3.2. 边界测试通过</a></li>
<li><a href="#133">1.3.3. 负面测试</a></li>
</ul>
</li>
<li><a href="#14">1.4. 代码鲁棒性</a></li>
</ul>
</li>
</ul>
</div>
<h1 id="1">1. 高质量的代码</h1>
<h2 id="11">1.1. 原则与境界</h2>
<p>见字如面，一看就懂</p>
<h2 id="12">1.2. 代码规范性</h2>
<h3 id="121">1.2.1. 变量/函数命名格式规范</h3>
<ul>
<li>Java<br />
驼峰命名：多个单词组成一个名称时，第一个单词全部小写，后面单词首字母大写；如：</li>
</ul>
<div class="hlcode"><pre><span class="n">public</span> <span class="kt">void</span> <span class="n">setUserName</span><span class="p">(</span><span class="n">String</span> <span class="n">userName</span><span class="p">)</span>
</pre></div>


<ul>
<li>C/C++/C#<br />
帕斯卡命名：多个单词组成一个名称时，每个单词的首字母大写；</li>
</ul>
<div class="hlcode"><pre><span class="k">public</span> <span class="kt">void</span> <span class="n">SetUserName</span><span class="p">(</span><span class="n">String</span> <span class="n">userName</span><span class="p">)</span>
</pre></div>


<ul>
<li>python<br />
类 首字符大写其他全部小写</li>
</ul>
<div class="hlcode"><pre><span class="k">class</span> <span class="nc">Car</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> 
    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</pre></div>


<h3 id="122">1.2.2. 变量/函数命名语义明确</h3>
<p>名词合理、动词到位</p>
<h4 id="1221">1.2.2.1. 动词到位</h4>
<p>一些比较有表达力的单词：</p>
<table>
<thead>
<tr>
<th align="center">单词</th>
<th>可替代单词</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">send</td>
<td>deliver、dispatch、announce、distribute、route</td>
</tr>
<tr>
<td align="center">find</td>
<td>search、extract、locate、recover</td>
</tr>
<tr>
<td align="center">start</td>
<td>launch、create、begin、open</td>
</tr>
<tr>
<td align="center">make</td>
<td>create、set up、build、generate、compose、add、new</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>类别</th>
<th>单词</th>
</tr>
</thead>
<tbody>
<tr>
<td>添加/插入/创建/初始化/加载</td>
<td>add、append、insert、create、initialize、load</td>
</tr>
<tr>
<td>删除/销毁</td>
<td>delete、remove、destroy、drop</td>
</tr>
<tr>
<td>打开/开始/启动</td>
<td>open、start</td>
</tr>
<tr>
<td>关闭/停止</td>
<td>close、stop</td>
</tr>
<tr>
<td>获取/读取/查找/查询</td>
<td>get、fetch、acquire、read、search、find、query</td>
</tr>
<tr>
<td>设置/重置/放入/写入/释放/刷新</td>
<td>set、reset、put、write、release、refresh</td>
</tr>
<tr>
<td>发送/推送</td>
<td>send、push</td>
</tr>
<tr>
<td>接收/拉取</td>
<td>receive、pull</td>
</tr>
<tr>
<td>提交/撤销/取消</td>
<td>submit、cancel</td>
</tr>
<tr>
<td>收集/采集/选取/选择</td>
<td>collect、pick、select</td>
</tr>
<tr>
<td>提取/解析</td>
<td>sub、extract、parse</td>
</tr>
<tr>
<td>编码/解码</td>
<td>encode、decode</td>
</tr>
<tr>
<td>填充/打包/压缩</td>
<td>fill、pack、compress</td>
</tr>
<tr>
<td>清空/拆包/解压</td>
<td>flush、clear、unpack、decompress</td>
</tr>
<tr>
<td>增加/减少</td>
<td>increase、decrease、reduce</td>
</tr>
<tr>
<td>分隔/拼接</td>
<td>split、join、concat</td>
</tr>
<tr>
<td>过滤/校验/检测</td>
<td>filter、valid、check</td>
</tr>
</tbody>
</table>
<p>布尔相关的命名加上 is、can、should、has 等前缀。</p>
<table>
<thead>
<tr>
<th>单词</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>is</td>
<td>是</td>
</tr>
<tr>
<td>can</td>
<td>可以</td>
</tr>
<tr>
<td>should</td>
<td>应该</td>
</tr>
<tr>
<td>has</td>
<td>用</td>
</tr>
</tbody>
</table>
<h5 id="12211-tips">1.2.2.1.1. tips</h5>
<p>多查询条件的函数名字谨慎使用介词by<br />
我们平时在写查询接口时，假如有多个查询参数怎么办？每个通过by一起连接依赖？No！这绝对不是明智的方式。假如一开始产品的需求是通过学生姓名查询学生信息，写出来的可能是这样的函数：<br />
public List<Student> getByName(String name);<br />
复制代码<br />
然后突然又有一天产品提出了新的需求，希望同时可以通过姓名和电话号码来查询学生信息，那么函数可能变成这样了：<br />
public List<Student> getByNameAndMobile(String name, String mobile);<br />
复制代码<br />
接着，没过多久，产品又希望根据学生年龄来查询学生信息，那么函数可能变成这样了：<br />
public List<Student> getByNameAndMobileAndAge(String name, String mobile, int age);<br />
复制代码<br />
如果这样来给函数命名，那么你的噩梦大门即将打开。<br />
通常比较好的做法是：<br />
• 如果是通过主键id来查询，那么可以通过by来连接查询信息，比如：<br />
public Student getByStudentId(long studentId);复制代码<br />
• 如果是通过其他属性来查询，并且未来会存在多个组合查询的可能性，建议进行封装，比如：<br />
public List<Student> getStudents(StudentSearchParam searchParam);<br />
复制代码<br />
最后，建议大家平时在写代码过程中，不要怕在函数命名上耗费时间，一个好的函数命名在后期会大大减少你代码重构的成本，争取对函数命名做到"见字如面"</p>
<h4 id="1222">1.2.2.2. 名词合理</h4>
<p>使用 i、j、k 作为循环迭代器的名字过于简单，user_i、member_i 这种名字会更有表达力。因为循环层次越多，代码越难理解，有表达力的迭代器名字可读性会更高。</p>
<p>为名字添加形容词等信息能让名字更具有表达力，但是名字也会变长。名字长短的准则是：作用域越大，名字越长。因此只有在短作用域才能使用一些简单名字。</p>
<p>起完名字要思考一下别人会对这个名字有何解读，会不会误解了原本想表达的含义。</p>
<h4 id="1223">1.2.2.3. 标记准确</h4>
<ul>
<li>用 min、max 表示数量范围；</li>
<li>用 first、last 表示访问空间的包含范围；</li>
</ul>
<div class="hlcode"><pre><span class="n">a</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>
<span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="c"># first =0</span>
<span class="n">a</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="c"># last =4</span>
</pre></div>


<ul>
<li>begin、end 表示访问空间的排除范围，即 end 不包含尾部。begin==first,end=last+1</li>
</ul>
<div class="hlcode"><pre><span class="n">a</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>
<span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="c"># begin =0</span>
<span class="n">a</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="c"># end =5  </span>
</pre></div>


<h4 id="1224-foo-bar">1.2.2.4. 其他--为什么foo bar？</h4>
<blockquote>
<ol>
<li>为什么国外程序员在编程中喜欢用 Foo bar 这个词？</li>
</ol>
</blockquote>
<p>foo是fu的变体，fu是英语习语fuck-up缩写，就是一团糟的意思。bar是beyond all recognition的缩写，超越所有认知，还是一团糟！</p>
<p>单词“foobar”或分离的“foo”与“bar”常出现于程序设计的案例中，如同Hello World程序一样，它们常被用于向学习者介绍某种程序语言。</p>
<p>“foo”“bar”常被作为函数／方法的名称或变量名。</p>
<h3 id="123">1.2.3. 良好的可读性</h3>
<h4 id="1231">1.2.3.1. 注释</h4>
<p>尽量简洁明了：</p>
<p>用 TODO 等做标记：</p>
<table>
<thead>
<tr>
<th>标记</th>
<th>用法</th>
</tr>
</thead>
<tbody>
<tr>
<td>TODO</td>
<td>待做</td>
</tr>
<tr>
<td>FIXME</td>
<td>待修复</td>
</tr>
<tr>
<td>HACK</td>
<td>粗糙的解决方案</td>
</tr>
<tr>
<td>XXX</td>
<td>危险！这里有重要的问题</td>
</tr>
</tbody>
</table>
<h4 id="1232">1.2.3.2. 一次只做一件事</h4>
<p>只做一件事的代码很容易让人知道其要做的事；</p>
<p>基本流程：列出代码所做的所有任务；把每个任务拆分到不同的函数，或者不同的段落。</p>
<h4 id="1233">1.2.3.3. 用自然语言表述代码</h4>
<p>先用自然语言书写代码逻辑，也就是伪代码，然后再写代码，这样代码逻辑会更清晰。</p>
<h4 id="1234">1.2.3.4. 减少代码量</h4>
<p>不要过度设计，编码过程会有很多变化，过度设计的内容到最后往往是无用的。</p>
<p>多用标准库实现。</p>
<h3 id="124">1.2.4. 文件名规范</h3>
<ol>
<li>
<p>文档的文件名不得含有空格。</p>
</li>
<li>
<p>文件名必须使用半角字符，不得使用全角字符。这也意味着，中文不能用于文件名。</p>
<div class="hlcode"><pre><span class="err">错误：</span> <span class="err">名词解释</span><span class="p">.</span><span class="n">md</span>
<span class="err">正确：</span> <span class="n">glossary</span><span class="p">.</span><span class="n">md</span>
</pre></div>


</li>
<li>
<p>文件名建议只使用小写字母，不使用大写字母。</p>
<div class="hlcode"><pre><span class="err">错误：</span><span class="n">TroubleShooting</span><span class="p">.</span><span class="n">md</span>
<span class="err">正确：</span><span class="n">troubleshooting</span><span class="p">.</span><span class="n">md</span>
</pre></div>


</li>
<li>
<p>为了醒目，某些说明文件的文件名，可以使用大写字母，比如README、LICENSE。</p>
</li>
</ol>
<h2 id="13">1.3. 代码完整性</h2>
<h3 id="131">1.3.1. 核心功能完整</h3>
<h3 id="132">1.3.2. 边界测试通过</h3>
<ol>
<li>考虑边界问题</li>
<li>循环、递归边界</li>
<li>输入输出边界</li>
</ol>
<h3 id="133">1.3.3. 负面测试</h3>
<ol>
<li>可能的错误输入</li>
</ol>
<h2 id="14">1.4. 代码鲁棒性</h2>
<p>考虑负面输入</p>
</div>
<div id="renote">
  <HR style=" FILTER: alpha (opacity = 100, finishopacity =0 , style= 3 )" width="80%" color=#987 cb 9 SIZE=3>
  <p>如果你觉得这篇文章对你有帮助，不妨请我喝杯咖啡，鼓励我创造更多!</p>
  <img src="/Wiki/static/images/pay.jpg" width="25%">
</div>

    </div>
    <div id="footer">
        <span>
            Copyright © 2021 zhang787jun.
            Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.
        </span>
    </div>

    
</body>
<script>
    function changeImgurl(site_root_url) {
        var images = document.images;
        var site_root = site_root_url;
        for (i = 0, len = images.length; i < len; i++) {
            image = images[i];
            image_src = image.src;
            if (image_src.search("attach") >= 0) {
                re_image_src = image_src.slice(image_src.search("attach"));
                abs_image_src = (site_root.endsWith("/")) ? site_root + re_image_src : site_root + "/" +
                    re_image_src;
                image.src = abs_image_src;
            }
        }
    }
    var site_root_url = "/Wiki";
    changeImgurl(site_root_url);
    let isMathjaxConfig = false; // 防止重复调用Config，造成性能损耗
    const initMathjaxConfig = () => {
        if (!window.MathJax) {
            return;
        }
        window.MathJax.Hub.Config({
            showProcessingMessages: false, //关闭js加载过程信息
            messageStyle: "none", //不显示信息
            jax: ["input/TeX", "output/HTML-CSS"],
            tex2jax: {
                inlineMath: [["$", "$"], ["\\(", "\\)"]], //行内公式选择符
                displayMath: [["$$", "$$"], ["\\[", "\\]"]], //段内公式选择符
                skipTags: ["script", "noscript", "style", "textarea", "pre", "code", "a"] //避开某些标签
            },
            "HTML-CSS": {
                availableFonts: ["STIX", "TeX"], //可选字体
                showMathMenu: false //关闭右击菜单显示
            }
        });
        isMathjaxConfig = true; //
    };
    if (isMathjaxConfig === false) {
        // 如果：没有配置MathJax
        initMathjaxConfig();
    };
</script>

</html>