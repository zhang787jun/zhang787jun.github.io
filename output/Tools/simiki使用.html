<!DOCTYPE HTML>
<html>

<head>
    <link rel="Stylesheet" type="text/css" href="/Wiki/static/css/style.css">
    <link rel="Stylesheet" type="text/css" href="/Wiki/static/css/tango.css">
    <link rel="shortcut icon" href="/Wiki/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/Wiki/favicon.ico" type="image/x-icon">
    <title>Simiki--轻量级Wiki框架 - Jun's personal knowledge wiki</title>
    <meta name="keywords" content="Technology, MachineLearning, DataMining, Wiki" />
    <meta name="description" content="A wiki website" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
            tex2jax: {
                inlineMath: [ ['$','$'], ["\\(","\\)"] ],
                displayMath: [ ['$$','$$'], ["\\[","\\]"] ]
            }
        });
    </script>
    <script type="text/javascript" async
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML">
        </script>
</head>

<body>

    <div id="container">
        
<div id="header">
  <div id="post-nav"><a href="/Wiki/">Home</a>&nbsp;»&nbsp;<a href="/Wiki/#Tools">Tools</a>&nbsp;»&nbsp;Simiki--轻量级Wiki框架</div>
</div>
<div class="clearfix"></div>
<div id="title">Simiki--轻量级Wiki框架</div>
<div id="content">
  <div class="toc"><span class="toctitle">Table of Contents</span><ul>
<li><a href="#simiki">Simiki 使用教程</a><ul>
<li><a href="#1-quick-start">1. Quick Start</a><ul>
<li><a href="#install">Install</a></li>
<li><a href="#update">Update</a></li>
<li><a href="#init-site">Init Site</a></li>
<li><a href="#create-a-new-wiki">Create a new wiki</a></li>
<li><a href="#generate-html">Generate 生成静态网页文件(html 等)</a></li>
<li><a href="#preview">Preview 本地查看网页</a></li>
<li><a href="#others">Others</a></li>
</ul>
</li>
<li><a href="#2">2. 修改配置</a><ul>
<li><a href="#1">1. 增加对数学符号的支持</a></li>
<li><a href="#2_1">2. 本地图片及文件的支持</a></li>
<li><a href="#3">3. 图片缩放</a></li>
<li><a href="#4-favicon">4. Favicon 支持</a></li>
<li><a href="#5css">5.二级网页css 不能正常布置的问题</a></li>
<li><a href="#6">6. 图片指向位置不正确</a></li>
</ul>
</li>
<li><a href="#smiki-wiki-github-page">Smiki 生成wiki 并发布到Github Page</a><ul>
<li><a href="#github-page">github page的相关概念</a><ul>
<li><a href="#user-pages">user pages</a></li>
<li><a href="#project-page">project page</a></li>
</ul>
</li>
<li><a href="#fabric">Fabric 部署</a></li>
<li><a href="#ghp-import">ghp-import 部署</a></li>
<li><a href="#git">git手动部署</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<h1 id="simiki">Simiki 使用教程</h1>
<p>Simiki is a simple wiki framework, written in <a href="https://www.python.org/">Python</a>.</p>
<ul>
<li>Easy to use. Creating a wiki only needs a few steps</li>
<li>Use <a href="http://daringfireball.net/projects/markdown/">Markdown</a>. Just open your editor and write</li>
<li>Store source files by category</li>
<li>Static HTML output</li>
<li>A CLI tool to manage the wiki</li>
</ul>
<h2 id="1-quick-start">1. Quick Start</h2>
<h3 id="install">Install</h3>
<div class="hlcode"><pre><span class="n">pip</span> <span class="n">install</span> <span class="n">simiki</span>
</pre></div>


<h3 id="update">Update</h3>
<div class="hlcode"><pre><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">U</span> <span class="n">simiki</span>
</pre></div>


<h3 id="init-site">Init Site</h3>
<div class="hlcode"><pre><span class="n">mkdir</span> <span class="n">mywiki</span> <span class="o">&amp;&amp;</span> <span class="n">cd</span> <span class="n">mywiki</span>
<span class="n">simiki</span> <span class="n">init</span>
</pre></div>


<h3 id="create-a-new-wiki">Create a new wiki</h3>
<div class="hlcode"><pre><span class="n">simiki</span> <span class="n">new</span> <span class="o">-</span><span class="n">t</span> <span class="s">&quot;Hello Simiki&quot;</span> <span class="o">-</span><span class="n">c</span> <span class="n">first</span><span class="o">-</span><span class="n">catetory</span>
</pre></div>


<h3 id="generate-html">Generate 生成静态网页文件(html 等)</h3>
<div class="hlcode"><pre><span class="n">simiki</span> <span class="n">g</span>
</pre></div>


<h3 id="preview">Preview 本地查看网页</h3>
<div class="hlcode"><pre><span class="n">simiki</span> <span class="n">p</span> <span class="o">-</span><span class="n">w</span>
</pre></div>


<p>For more information, <code>simiki -h</code> or have a look at <a href="http://simiki.org">Simiki.org</a></p>
<h3 id="others">Others</h3>
<ul>
<li><a href="http://simiki.org">simiki.org</a></li>
<li><a href="https://github.com/tankywoo/simiki">https://github.com/tankywoo/simiki</a></li>
<li>Email: <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#109;&#101;&#64;&#116;&#97;&#110;&#107;&#121;&#119;&#111;&#111;&#46;&#99;&#111;&#109;">&#109;&#101;&#64;&#116;&#97;&#110;&#107;&#121;&#119;&#111;&#111;&#46;&#99;&#111;&#109;</a></li>
<li><a href="https://github.com/tankywoo/simiki/wiki/Simiki-Users">Simiki Users</a></li>
</ul>
<h2 id="2">2. 修改配置</h2>
<h3 id="1">1. 增加对数学符号的支持</h3>
<p>在主题的模板html 文件中添加 <code>MathJax.js</code>(可通过本地或CDN远程加速添加)</p>
<div class="hlcode"><pre><span class="n">vim</span>  <span class="p">.</span><span class="o">/</span><span class="n">themes</span><span class="o">/</span><span class="n">xxx</span><span class="o">/</span><span class="n">base</span><span class="p">.</span><span class="n">html</span> 
</pre></div>


<p>头文件中</p>
<div class="hlcode"><pre><span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        ...
        <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">async</span>
        <span class="na">src=</span><span class="s">&quot;https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;/script&gt;</span>
        ...
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>
        ...
    <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>


<h3 id="2_1">2. 本地图片及文件的支持</h3>
<p>在<code>_config.yml</code>配置文件中，配置 attach，默认值为"attach"文件夹<br />
新建<code>./attach</code> 文件夹,运行<code>simiki -g</code> 时将会把 <code>./attach</code> 文件夹的内容复制到 <code>./output/attach</code></p>
<h3 id="3">3. 图片缩放</h3>
<p>jquery</p>
<p>http://www.360doc.com/content/17/0628/01/11559041_667078111.shtml</p>
<h3 id="4-favicon">4. Favicon 支持</h3>
<p>Favicon<br />
(v1.5.0.post1版本)</p>
<p>将文件名为favicon.ico的icon文件放在wiki根目录下.</p>
<p>另外, 主题需要额外支持:</p>
<div class="hlcode"><pre><span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;shortcut icon&quot;</span> <span class="na">href=</span><span class="s">&quot;{{ site.root }}/favicon.ico&quot;</span> <span class="na">type=</span><span class="s">&quot;image/x-icon&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;icon&quot;</span> <span class="na">href=</span><span class="s">&quot;{{ site.root }}/favicon.ico&quot;</span> <span class="na">type=</span><span class="s">&quot;image/x-icon&quot;</span><span class="nt">&gt;</span>
</pre></div>


<h3 id="5css">5.二级网页css 不能正常布置的问题</h3>
<p>CSS路径有问题，你这里用到了二级目录</p>
<p>主题里配置CSS文件路径应该改为:</p>
<div class="hlcode"><pre><span class="o">&lt;</span><span class="n">link</span> <span class="n">rel</span><span class="o">=</span><span class="s">&quot;Stylesheet&quot;</span> <span class="n">type</span><span class="o">=</span><span class="s">&quot;text/css&quot;</span> <span class="n">href</span><span class="o">=</span><span class="s">&quot;{{ site.root }}/static/css/style.css&quot;</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">link</span> <span class="n">rel</span><span class="o">=</span><span class="s">&quot;Stylesheet&quot;</span> <span class="n">type</span><span class="o">=</span><span class="s">&quot;text/css&quot;</span> <span class="n">href</span><span class="o">=</span><span class="s">&quot;{{ site.root }}/static/css/tango.css&quot;</span><span class="o">&gt;</span>


<span class="n">simiki</span> <span class="n">generate</span> <span class="o">--</span><span class="n">ignore</span><span class="o">-</span><span class="n">root</span>
</pre></div>


<h3 id="6">6. 图片指向位置不正确</h3>
<p>在主题的模板文件修改html 文件，在html文件后面增加js 脚本文件。</p>
<div class="hlcode"><pre><span class="n">vim</span>  <span class="p">.</span><span class="o">/</span><span class="n">themes</span><span class="o">/</span><span class="n">xxx</span><span class="o">/</span><span class="n">base</span><span class="p">.</span><span class="n">html</span> 
</pre></div>


<div class="hlcode"><pre><span class="nt">&lt;script&gt;</span>
        <span class="kd">function</span> <span class="nx">changeImgurl</span><span class="p">(</span><span class="nx">site_root_url</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">images</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">images</span><span class="p">;</span>
            <span class="kd">var</span> <span class="nx">site_root</span> <span class="o">=</span> <span class="nx">site_root_url</span><span class="p">;</span>
            <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">len</span> <span class="o">=</span> <span class="nx">images</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">len</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">image</span> <span class="o">=</span> <span class="nx">images</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
                <span class="nx">image_src</span> <span class="o">=</span> <span class="nx">image</span><span class="p">.</span><span class="nx">src</span><span class="p">;</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">image_src</span><span class="p">.</span><span class="nx">search</span><span class="p">(</span><span class="s2">&quot;attach&quot;</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">re_image_src</span> <span class="o">=</span> <span class="nx">image_src</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">image_src</span><span class="p">.</span><span class="nx">search</span><span class="p">(</span><span class="s2">&quot;attach&quot;</span><span class="p">));</span>
                    <span class="nx">abs_image_src</span> <span class="o">=</span> <span class="p">(</span><span class="nx">site_root</span><span class="p">.</span><span class="nx">endsWith</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">))</span> <span class="o">?</span> <span class="nx">site_root</span> <span class="o">+</span> <span class="nx">re_image_src</span> <span class="o">:</span> <span class="nx">site_root</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span>
                        <span class="nx">re_image_src</span><span class="p">;</span>
                    <span class="nx">image</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="nx">abs_image_src</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="kd">var</span> <span class="nx">site_root_url</span> <span class="o">=</span> <span class="s2">&quot;{{ site.root }}&quot;</span><span class="p">;</span>
        <span class="nx">changeImgurl</span><span class="p">(</span><span class="nx">site_root_url</span><span class="p">);</span>
<span class="nt">&lt;/script&gt;</span>
</pre></div>


<h2 id="smiki-wiki-github-page">Smiki 生成wiki 并发布到Github Page</h2>
<h3 id="github-page">github page的相关概念</h3>
<h4 id="user-pages">user pages</h4>
<ol>
<li>数量<br />
Github 为每一个账户都设置了一个默认的 user pages, 如果你要使用，创建的 <repository name> 必须符合 XXX.github.io</li>
<li>发布分支<br />
并且 user pages 只能使用这个项目的主分支master来作为发布源。</li>
</ol>
<p>例如本账户的user pages 地址就是 https://zhang787jun.github.io</p>
<h4 id="project-page">project page</h4>
<ol>
<li>数量<br />
每个账户下可以创建多个项目，每一个项目都可以创建 一个project pages 来发布github page。<br />
2.<br />
对于project page，你可以选择 master 作为 githubpages 发布源，也可以选择 gh-pages 分支作为发布源，因为pages一般是用来说明项目的，因此项目一般不要使用主分支发布，直接使用 gh-pages 分支更好，这样就和你的 master 代码分开了。如果你就是想要在主分支发布，那么在主分支的root目录下必须要有一个 /docs 目录，发布源代码需要在 /docs 目录下。 自定义域名只要 在发布源的代码目录下面加入CNAME文件即可，里面只需要填写你的自定义域名！如果你的域名还未被DNS收录，那么github会发出警告消息。</li>
</ol>
<p>我的wiki就是使用 project page，然后 master 是所有的源文件代码目录和markdown笔记文件，但是这个并不是发布源，发布源使用 gh-pages 分支，每次只发布 output 目录下的东西，也就是说我的 gh-pages 分支，只有simiki 生成的output目录下的内容。主分支是整个内容。每次最终要发布的内容推送到 gh-pages 分支，然后备份是推送到 master 分支，这样我的md文件就不会丢失了！在其他电脑上我也可以下载下来编辑和修改，然后重新发布！</p>
<p>在 _config.yml 中配置</p>
<div class="hlcode"><pre><span class="n">url</span><span class="o">:</span><span class="n">https</span><span class="o">://</span><span class="n">xx</span><span class="o">.</span><span class="na">github</span><span class="o">.</span><span class="na">io</span><span class="sr">/Wiki/</span>
<span class="n">root</span><span class="o">:</span> <span class="sr">/Wiki/</span>
</pre></div>


<h3 id="fabric">Fabric 部署</h3>
<p>simiki官方的推荐使用 Fabric 部署，Fabric目前版本较乱，注意</p>
<p>如果使用Fabric, 可能会出现一些问题, 首先确认安装了以下模块:</p>
<div class="hlcode"><pre><span class="cp">#pycrypto:</span>
<span class="n">easy_install</span> <span class="n">http</span><span class="o">:</span><span class="c1">//www.voidspace.org.uk/downloads/pycrypto26/pycrypto-2.6.win32-py2.7.exe</span>
<span class="cp"># ecdsa:</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">ecdsa</span>
</pre></div>


<h3 id="ghp-import">ghp-import 部署</h3>
<p>同时可以使用 <a href="https://github.com/davisp/ghp-import">ghp-import</a> 部署 </p>
<div class="hlcode"><pre><span class="n">Usage</span><span class="o">:</span> <span class="n">ghp</span><span class="o">-</span><span class="k">import</span> <span class="o">[</span><span class="n">OPTIONS</span><span class="o">]</span> <span class="n">DIRECTORY</span>

<span class="n">Options</span><span class="o">:</span>
  <span class="o">-</span><span class="n">n</span><span class="o">,</span> <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">jekyll</span>       <span class="n">Include</span> <span class="n">a</span> <span class="o">.</span><span class="na">nojekyll</span> <span class="n">file</span> <span class="k">in</span> <span class="n">the</span> <span class="n">branch</span><span class="o">.</span>
  <span class="o">-</span><span class="n">c</span> <span class="n">CNAME</span><span class="o">,</span> <span class="o">--</span><span class="n">cname</span><span class="o">=</span><span class="n">CNAME</span>
                        <span class="n">Write</span> <span class="n">a</span> <span class="n">CNAME</span> <span class="n">file</span> <span class="k">with</span> <span class="n">the</span> <span class="n">given</span> <span class="n">CNAME</span><span class="o">.</span>
  <span class="o">-</span><span class="n">m</span> <span class="n">MESG</span><span class="o">,</span> <span class="o">--</span><span class="n">message</span><span class="o">=</span><span class="n">MESG</span>
                        <span class="n">The</span> <span class="n">commit</span> <span class="n">message</span> <span class="n">to</span> <span class="n">use</span> <span class="n">on</span> <span class="n">the</span> <span class="n">target</span> <span class="n">branch</span><span class="o">.</span>
  <span class="o">-</span><span class="n">p</span><span class="o">,</span> <span class="o">--</span><span class="n">push</span>            <span class="n">Push</span> <span class="n">the</span> <span class="n">branch</span> <span class="n">to</span> <span class="n">origin</span><span class="o">/{</span><span class="n">branch</span><span class="o">}</span> <span class="n">after</span> <span class="n">committing</span><span class="o">.</span>
  <span class="o">-</span><span class="n">f</span><span class="o">,</span> <span class="o">--</span><span class="n">force</span>           <span class="n">Force</span> <span class="n">the</span> <span class="n">push</span> <span class="n">to</span> <span class="n">the</span> <span class="n">repository</span>
  <span class="o">-</span><span class="n">r</span> <span class="n">REMOTE</span><span class="o">,</span> <span class="o">--</span><span class="n">remote</span><span class="o">=</span><span class="n">REMOTE</span>
                        <span class="n">The</span> <span class="n">name</span> <span class="n">of</span> <span class="n">the</span> <span class="n">remote</span> <span class="n">to</span> <span class="n">push</span> <span class="n">to</span><span class="o">.</span> <span class="o">[</span><span class="n">origin</span><span class="o">]</span>
  <span class="o">-</span><span class="n">b</span> <span class="n">BRANCH</span><span class="o">,</span> <span class="o">--</span><span class="n">branch</span><span class="o">=</span><span class="n">BRANCH</span>
                        <span class="n">Name</span> <span class="n">of</span> <span class="n">the</span> <span class="n">branch</span> <span class="n">to</span> <span class="n">write</span> <span class="n">to</span><span class="o">.</span> <span class="o">[</span><span class="n">gh</span><span class="o">-</span><span class="n">pages</span><span class="o">]</span>
  <span class="o">-</span><span class="n">s</span><span class="o">,</span> <span class="o">--</span><span class="n">shell</span>           <span class="n">Use</span> <span class="n">the</span> <span class="n">shell</span> <span class="n">when</span> <span class="n">invoking</span> <span class="n">Git</span><span class="o">.</span> <span class="o">[</span><span class="n">False</span><span class="o">]</span>
  <span class="o">-</span><span class="n">l</span><span class="o">,</span> <span class="o">--</span><span class="n">follow</span><span class="o">-</span><span class="n">links</span>    <span class="n">Follow</span> <span class="n">symlinks</span> <span class="n">when</span> <span class="n">adding</span> <span class="n">files</span><span class="o">.</span> <span class="o">[</span><span class="n">False</span><span class="o">]</span>
  <span class="o">-</span><span class="n">h</span><span class="o">,</span> <span class="o">--</span><span class="n">help</span>            <span class="n">show</span> <span class="k">this</span> <span class="n">help</span> <span class="n">message</span> <span class="n">and</span> <span class="n">exit</span>

<span class="n">ghp</span><span class="o">-</span><span class="k">import</span> <span class="o">-</span><span class="n">p</span> <span class="o">-</span><span class="n">m</span> <span class="s2">&quot;Update output documentation&quot;</span> <span class="o">-</span><span class="n">r</span> <span class="n">origin</span> <span class="o">-</span><span class="n">b</span> <span class="n">gh</span><span class="o">-</span><span class="n">pages</span> <span class="n">output</span>
</pre></div>


<h3 id="git">git手动部署</h3>
<div class="hlcode"><pre><span class="n">git</span> <span class="n">checkout</span> <span class="n">gh</span><span class="o">-</span><span class="n">pages</span>
<span class="n">git</span> <span class="n">push</span> <span class="n">origin</span> <span class="n">gh</span><span class="o">-</span><span class="n">pages</span>
</pre></div>


<p>[1]https://help.github.com/articles/creating-project-pages-manually/</p>
</div>
<div id="renote">
  <HR style=" FILTER: alpha (opacity = 100, finishopacity =0 , style= 3 )" width="80%" color=#987 cb 9 SIZE=3>
  <p>如果你觉得这篇文章对你有帮助，不妨请我喝杯咖啡，鼓励我创造更多!</p>
  <img src="/Wiki/static/images/pay.jpg" width="25%">
</div>

    </div>
    <div id="footer">
        <span>
            Copyright © 2020 zhang787jun.
            Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.
        </span>
    </div>

    
</body>
<script>
    function changeImgurl(site_root_url) {
        var images = document.images;
        var site_root = site_root_url;
        for (i = 0, len = images.length; i < len; i++) {
            image = images[i];
            image_src = image.src;
            if (image_src.search("attach") >= 0) {
                re_image_src = image_src.slice(image_src.search("attach"));
                abs_image_src = (site_root.endsWith("/")) ? site_root + re_image_src : site_root + "/" +
                    re_image_src;
                image.src = abs_image_src;
            }
        }
    }
    var site_root_url = "/Wiki";
    changeImgurl(site_root_url);
    let isMathjaxConfig = false; // 防止重复调用Config，造成性能损耗
    const initMathjaxConfig = () => {
        if (!window.MathJax) {
            return;
        }
        window.MathJax.Hub.Config({
            showProcessingMessages: false, //关闭js加载过程信息
            messageStyle: "none", //不显示信息
            jax: ["input/TeX", "output/HTML-CSS"],
            tex2jax: {
                inlineMath: [["$", "$"], ["\\(", "\\)"]], //行内公式选择符
                displayMath: [["$$", "$$"], ["\\[", "\\]"]], //段内公式选择符
                skipTags: ["script", "noscript", "style", "textarea", "pre", "code", "a"] //避开某些标签
            },
            "HTML-CSS": {
                availableFonts: ["STIX", "TeX"], //可选字体
                showMathMenu: false //关闭右击菜单显示
            }
        });
        isMathjaxConfig = true; //
    };
    if (isMathjaxConfig === false) {
        // 如果：没有配置MathJax
        initMathjaxConfig();
    };
</script>

</html>